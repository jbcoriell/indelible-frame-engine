{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\froman\fcharset0 Times-Roman;\f1\froman\fcharset0 Times-Italic;}
{\colortbl;\red255\green255\blue255;\red147\green0\blue147;\red0\green0\blue0;\red143\green144\blue150;
\red42\green44\blue51;\red50\green94\blue238;\red66\green147\blue62;\red167\green87\blue5;}
{\*\expandedcolortbl;;\cssrgb\c65098\c14902\c64314;\cssrgb\c0\c0\c0;\cssrgb\c62745\c63137\c65490;
\cssrgb\c21961\c22745\c25882;\cssrgb\c25098\c47059\c94902;\cssrgb\c31373\c63137\c30980;\cssrgb\c71765\c41961\c392;}
\margl1440\margr1440\vieww15440\viewh16260\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs24 \cf2 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 import\cf0 \strokec3  streamlit \cf2 \strokec2 as\cf0 \strokec3  st \cf2 \strokec2 import\cf0 \strokec3  json \cf2 \strokec2 import\cf0 \strokec3  os \cf2 \strokec2 from\cf0 \strokec3  datetime \cf2 \strokec2 import\cf0 \strokec3  datetime \cf2 \strokec2 import\cf0 \strokec3  anthropic 
\f1\i \cf4 \strokec4 # Page config
\f0\i0 \cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 set_page_config\cf5 \strokec5 (\cf0 \strokec3  page_title\cf6 \strokec6 =\cf7 \strokec7 "Indelible Frame Research Engine"\cf5 \strokec5 ,\cf0 \strokec3  page_icon\cf6 \strokec6 =\cf7 \strokec7 "\uc0\u55356 \u57260 "\cf5 \strokec5 ,\cf0 \strokec3  layout\cf6 \strokec6 =\cf7 \strokec7 "wide"\cf0 \strokec3  \cf5 \strokec5 )\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Custom CSS
\f0\i0 \cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 markdown\cf5 \strokec5 (\cf7 \strokec7 """ \cf0 \strokec3 <style> .main \{ background: linear-gradient(135deg, #1e1b4b 0%, #581c87 50%, #1e1b4b 100%); \}.stButton>button \{ width: 100%; \} </style> \cf7 \strokec7 """\cf5 \strokec5 ,\cf0 \strokec3  unsafe_allow_html\cf6 \strokec6 =\cf8 \strokec8 True\cf5 \strokec5 )\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Initialize session state
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  \cf7 \strokec7 'boards'\cf0 \strokec3  \cf2 \strokec2 not\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 [\cf7 \strokec7 '1860s Ireland'\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 'Sci-Fi Dystopia'\cf5 \strokec5 ]\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  \cf7 \strokec7 'current_board'\cf0 \strokec3  \cf2 \strokec2 not\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 :\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board \cf6 \strokec6 =\cf0 \strokec3  \cf7 \strokec7 '1860s Ireland'\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  \cf7 \strokec7 'pinned_items'\cf0 \strokec3  \cf2 \strokec2 not\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items \cf6 \strokec6 =\cf5 \strokec5 \{\}\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  \cf7 \strokec7 'search_results'\cf0 \strokec3  \cf2 \strokec2 not\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 search_results \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 []\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  \cf7 \strokec7 'selected_items'\cf0 \strokec3  \cf2 \strokec2 not\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 :\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items \cf6 \strokec6 =\cf0 \strokec3  \cf7 \strokec7 set\cf5 \strokec5 ()\cf0 \strokec3  \cf2 \strokec2 def\cf0 \strokec3  \cf6 \strokec6 search_with_ai\cf5 \strokec5 (\cf0 \strokec3 query\cf5 \strokec5 ,\cf0 \strokec3  content_type\cf5 \strokec5 ):\cf0 \strokec3  \cf7 \strokec7 """Search using Claude with web search"""\cf0 \strokec3  \cf2 \strokec2 try\cf5 \strokec5 :\cf0 \strokec3  client \cf6 \strokec6 =\cf0 \strokec3  anthropic\cf5 \strokec5 .\cf0 \strokec3 Anthropic\cf5 \strokec5 ()\cf0 \strokec3  content_filter \cf6 \strokec6 =\cf0 \strokec3  \cf7 \strokec7 ""\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  content_type \cf6 \strokec6 !=\cf0 \strokec3  \cf7 \strokec7 "all"\cf5 \strokec5 :\cf0 \strokec3  content_filter \cf6 \strokec6 =\cf0 \strokec3  \cf7 \strokec7 f"Focus primarily on \cf5 \strokec5 \{\cf0 \strokec3 content_type\cf5 \strokec5 \}\cf7 \strokec7 ."\cf0 \strokec3  message \cf6 \strokec6 =\cf0 \strokec3  client\cf5 \strokec5 .\cf0 \strokec3 messages\cf5 \strokec5 .\cf0 \strokec3 create\cf5 \strokec5 (\cf0 \strokec3  model\cf6 \strokec6 =\cf7 \strokec7 "claude-sonnet-4-20250514"\cf5 \strokec5 ,\cf0 \strokec3  max_tokens\cf6 \strokec6 =\cf8 \strokec8 4000\cf5 \strokec5 ,\cf0 \strokec3  tools\cf6 \strokec6 =\cf5 \strokec5 [\{\cf7 \strokec7 "type"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "web_search_20250305"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "name"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "web_search"\cf0 \strokec3  \cf5 \strokec5 \}],\cf0 \strokec3  messages\cf6 \strokec6 =\cf5 \strokec5 [\{\cf0 \strokec3  \cf7 \strokec7 "role"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "user"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "content"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 f"""Search the web for: "\cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7 " \cf5 \strokec5 \{\cf0 \strokec3 content_filter\cf5 \strokec5 \}\cf7 \strokec7  \cf0 \strokec3 Find 8-10 diverse, high-quality sources (articles, images, videos, PDFs). Return ONLY a valid JSON array with NO markdown formatting, NO backticks, NO preamble: [\{\{"title": "Source Title", "url": "https://url.com", "description": "Brief description", "type": "article"\}\}] \cf7 \strokec7 Types must be: article, image, video, or pdf"""\cf0 \strokec3  \cf5 \strokec5 \}])\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Extract text from response
\f0\i0 \cf0 \strokec3  response_text \cf6 \strokec6 =\cf0 \strokec3  \cf7 \strokec7 ""\cf0 \strokec3  \cf2 \strokec2 for\cf0 \strokec3  block \cf2 \strokec2 in\cf0 \strokec3  message\cf5 \strokec5 .\cf0 \strokec3 content\cf5 \strokec5 :\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  block\cf5 \strokec5 .\cf7 \strokec7 type\cf0 \strokec3  \cf6 \strokec6 ==\cf0 \strokec3  \cf7 \strokec7 "text"\cf5 \strokec5 :\cf0 \strokec3  response_text \cf6 \strokec6 +=\cf0 \strokec3 block\cf5 \strokec5 .\cf0 \strokec3 text 
\f1\i \cf4 \strokec4 # Clean and parse JSON
\f0\i0 \cf0 \strokec3  response_text \cf6 \strokec6 =\cf0 \strokec3  response_text\cf5 \strokec5 .\cf0 \strokec3 strip\cf5 \strokec5 ()\cf0 \strokec3  response_text \cf6 \strokec6 =\cf0 \strokec3  response_text\cf5 \strokec5 .\cf0 \strokec3 replace\cf5 \strokec5 (\cf7 \strokec7 "```json"\cf5 \strokec5 ,\cf7 \strokec7 ""\cf5 \strokec5 ).\cf0 \strokec3 replace\cf5 \strokec5 (\cf7 \strokec7 "```"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 ""\cf5 \strokec5 )\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Find JSON array
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 import\cf0 \strokec3  re json_match \cf6 \strokec6 =\cf0 \strokec3  re\cf5 \strokec5 .\cf0 \strokec3 search\cf5 \strokec5 (\cf7 \strokec7 r'\\[\\s*\\\{[\\s\\S]*\\\}\\s*\\]'\cf5 \strokec5 ,\cf0 \strokec3  response_text\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3 json_match\cf5 \strokec5 :\cf0 \strokec3  results \cf6 \strokec6 =\cf0 \strokec3  json\cf5 \strokec5 .\cf0 \strokec3 loads\cf5 \strokec5 (\cf0 \strokec3 json_match\cf5 \strokec5 .\cf0 \strokec3 group\cf5 \strokec5 (\cf8 \strokec8 0\cf5 \strokec5 ))\cf0 \strokec3  \cf2 \strokec2 return\cf0 \strokec3  results \cf2 \strokec2 else\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 error\cf5 \strokec5 (\cf7 \strokec7 "Could not parse search results. Using demo data."\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 return\cf0 \strokec3  generate_demo_results\cf5 \strokec5 (\cf0 \strokec3 query\cf5 \strokec5 ,\cf0 \strokec3  content_type\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 except\cf0 \strokec3  Exception \cf2 \strokec2 as\cf0 \strokec3  e\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 error\cf5 \strokec5 (\cf7 \strokec7 f"Search error: \cf5 \strokec5 \{\cf7 \strokec7 str\cf5 \strokec5 (\cf0 \strokec3 e\cf5 \strokec5 )\}\cf7 \strokec7 "\cf5 \strokec5 )\cf2 \strokec2 return\cf0 \strokec3  generate_demo_results\cf5 \strokec5 (\cf0 \strokec3 query\cf5 \strokec5 ,\cf0 \strokec3  content_type\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 def\cf0 \strokec3  \cf6 \strokec6 generate_demo_results\cf5 \strokec5 (\cf0 \strokec3 query\cf5 \strokec5 ,\cf0 \strokec3  content_type\cf5 \strokec5 ):\cf0 \strokec3  \cf7 \strokec7 """Generate demo results as fallback"""\cf0 \strokec3  demo \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 \{\cf0 \strokec3  \cf7 \strokec7 'article'\cf5 \strokec5 :\cf0 \strokec3  \cf5 \strokec5 [\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 "title"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 f"\cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7  - Historical Overview"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "url"\cf5 \strokec5 :\cf7 \strokec7 "https://history.com/example1"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "description"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "Comprehensive historical analysis"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "type"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "article"\cf5 \strokec5 \},\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 "title"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 f"Research Guide: \cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "url"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "https://jstor.org/example2"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "description"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "Academic research and sources"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "type"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "article"\cf5 \strokec5 \},\{\cf7 \strokec7 "title"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 f"Understanding \cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "url"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "https://museum.org/example3"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "description"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "Detailed exploration with references"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "type"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "article"\cf5 \strokec5 \},\cf0 \strokec3  \cf5 \strokec5 ],\cf0 \strokec3  \cf7 \strokec7 'image'\cf5 \strokec5 :\cf0 \strokec3  \cf5 \strokec5 [\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 "title"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 f"\cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7  - Photo Archive"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "url"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "https://archive.org/images1"\cf5 \strokec5 ,\cf7 \strokec7 "description"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "Historical photographs"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "type"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "image"\cf5 \strokec5 \},\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 "title"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 f"Visual Guide to \cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "url"\cf5 \strokec5 :\cf7 \strokec7 "https://flickr.com/images2"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "description"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "Curated image collection"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "type"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "image"\cf5 \strokec5 \},\cf0 \strokec3  \cf5 \strokec5 ],\cf0 \strokec3  \cf7 \strokec7 'video'\cf5 \strokec5 :\cf0 \strokec3  \cf5 \strokec5 [\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 "title"\cf5 \strokec5 :\cf7 \strokec7 f"Documentary: \cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "url"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "https://youtube.com/video1"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "description"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "Educational documentary"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "type"\cf5 \strokec5 :\cf7 \strokec7 "video"\cf5 \strokec5 \},\cf0 \strokec3  \cf5 \strokec5 ],\cf0 \strokec3  \cf7 \strokec7 'pdf'\cf5 \strokec5 :\cf0 \strokec3  \cf5 \strokec5 [\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 "title"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 f"\cf5 \strokec5 \{\cf0 \strokec3 query\cf5 \strokec5 \}\cf7 \strokec7  - Research Paper"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "url"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "https://scholar.google.com/pdf1"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "description"\cf5 \strokec5 :\cf7 \strokec7 "Academic PDF"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "type"\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 "pdf"\cf5 \strokec5 \},\cf0 \strokec3  \cf5 \strokec5 ]\cf0 \strokec3  \cf5 \strokec5 \}\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  content_type \cf6 \strokec6 ==\cf0 \strokec3  \cf7 \strokec7 "all"\cf5 \strokec5 :\cf0 \strokec3  \cf2 \strokec2 return\cf0 \strokec3  demo\cf5 \strokec5 [\cf7 \strokec7 'article'\cf5 \strokec5 ][:\cf8 \strokec8 3\cf5 \strokec5 ]\cf0 \strokec3  \cf6 \strokec6 +\cf0 \strokec3  demo\cf5 \strokec5 [\cf7 \strokec7 'image'\cf5 \strokec5 ][:\cf8 \strokec8 2\cf5 \strokec5 ]\cf0 \strokec3  \cf6 \strokec6 +\cf0 \strokec3 demo\cf5 \strokec5 [\cf7 \strokec7 'video'\cf5 \strokec5 ][:\cf8 \strokec8 1\cf5 \strokec5 ]\cf0 \strokec3  \cf6 \strokec6 +\cf0 \strokec3  demo\cf5 \strokec5 [\cf7 \strokec7 'pdf'\cf5 \strokec5 ][:\cf8 \strokec8 1\cf5 \strokec5 ]\cf0 \strokec3  \cf2 \strokec2 return\cf0 \strokec3  demo\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf0 \strokec3 content_type\cf5 \strokec5 ,\cf0 \strokec3  demo\cf5 \strokec5 [\cf7 \strokec7 'article'\cf5 \strokec5 ])\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Sidebar
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 sidebar\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 title\cf5 \strokec5 (\cf7 \strokec7 "\uc0\u55356 \u57260  Indelible Frame"\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 caption\cf5 \strokec5 (\cf7 \strokec7 "AI Research Engine"\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 divider\cf5 \strokec5 ()\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 subheader\cf5 \strokec5 (\cf7 \strokec7 "Project Boards"\cf5 \strokec5 )\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Board selector
\f0\i0 \cf0 \strokec3  selected \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 selectbox\cf5 \strokec5 (\cf7 \strokec7 "Select Board"\cf5 \strokec5 ,\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board \cf6 \strokec6 =\cf0 \strokec3  selected 
\f1\i \cf4 \strokec4 # New board
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 expander\cf5 \strokec5 (\cf7 \strokec7 "\uc0\u10133  Create New Board"\cf5 \strokec5 ):\cf0 \strokec3  new_board \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 text_input\cf5 \strokec5 (\cf7 \strokec7 "Board Name"\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 button\cf5 \strokec5 (\cf7 \strokec7 "Create"\cf5 \strokec5 ):\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  new_board \cf2 \strokec2 and\cf0 \strokec3 new_board \cf2 \strokec2 not\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards\cf5 \strokec5 .\cf0 \strokec3 append\cf5 \strokec5 (\cf0 \strokec3 new_board\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board \cf6 \strokec6 =\cf0 \strokec3 new_board st\cf5 \strokec5 .\cf0 \strokec3 rerun\cf5 \strokec5 ()\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Delete board
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  \cf7 \strokec7 len\cf5 \strokec5 (\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards\cf5 \strokec5 )\cf0 \strokec3  \cf6 \strokec6 >\cf0 \strokec3  \cf8 \strokec8 1\cf5 \strokec5 :\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 button\cf5 \strokec5 (\cf7 \strokec7 "\uc0\u55357 \u56785 \u65039  Delete Current Board"\cf5 \strokec5 ):\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards\cf5 \strokec5 .\cf0 \strokec3 remove\cf5 \strokec5 (\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards\cf5 \strokec5 [\cf8 \strokec8 0\cf5 \strokec5 ]\cf2 \strokec2 if\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 :\cf0 \strokec3  \cf2 \strokec2 del\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 [\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 ]\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 rerun\cf5 \strokec5 ()\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Pin selected items
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 divider\cf5 \strokec5 ()\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 write\cf5 \strokec5 (\cf7 \strokec7 f"**\cf5 \strokec5 \{\cf7 \strokec7 len\cf5 \strokec5 (\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items\cf5 \strokec5 )\}\cf7 \strokec7  items selected**"\cf5 \strokec5 )\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 write\cf5 \strokec5 (\cf7 \strokec7 "Pin to board:"\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 for\cf0 \strokec3  board \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 boards\cf5 \strokec5 :\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 button\cf5 \strokec5 (\cf7 \strokec7 f"\uc0\u55357 \u56524  \cf5 \strokec5 \{\cf0 \strokec3 board\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ,\cf0 \strokec3  key\cf6 \strokec6 =\cf7 \strokec7 f"pin_\cf5 \strokec5 \{\cf0 \strokec3 board\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ):\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Pin items
\f0\i0 \cf0 \strokec3  items_to_pin \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 [\cf0 \strokec3 r \cf2 \strokec2 for\cf0 \strokec3  r \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 search_results \cf2 \strokec2 if\cf0 \strokec3  r\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf7 \strokec7 'id'\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items\cf5 \strokec5 ]\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  board \cf2 \strokec2 notin\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 [\cf0 \strokec3 board\cf5 \strokec5 ]\cf0 \strokec3  \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 []\cf0 \strokec3  \cf2 \strokec2 for\cf0 \strokec3  item \cf2 \strokec2 in\cf0 \strokec3  items_to_pin\cf5 \strokec5 :\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 [\cf0 \strokec3 board\cf5 \strokec5 ].\cf0 \strokec3 append\cf5 \strokec5 (\{\cf0 \strokec3  \cf7 \strokec7 'title'\cf5 \strokec5 :\cf0 \strokec3  item\cf5 \strokec5 [\cf7 \strokec7 'title'\cf5 \strokec5 ],\cf0 \strokec3  \cf7 \strokec7 'url'\cf5 \strokec5 :\cf0 \strokec3  item\cf5 \strokec5 [\cf7 \strokec7 'url'\cf5 \strokec5 ],\cf0 \strokec3  \cf7 \strokec7 'type'\cf5 \strokec5 :\cf0 \strokec3  item\cf5 \strokec5 [\cf7 \strokec7 'type'\cf5 \strokec5 ],\cf0 \strokec3  \cf7 \strokec7 'description'\cf5 \strokec5 :\cf0 \strokec3 item\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf7 \strokec7 'description'\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 ''\cf5 \strokec5 ),\cf0 \strokec3  \cf7 \strokec7 'added'\cf5 \strokec5 :\cf0 \strokec3  datetime\cf5 \strokec5 .\cf0 \strokec3 now\cf5 \strokec5 ().\cf0 \strokec3 strftime\cf5 \strokec5 (\cf7 \strokec7 '%Y-%m-%d'\cf5 \strokec5 )\cf0 \strokec3  \cf5 \strokec5 \})\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items\cf5 \strokec5 .\cf0 \strokec3 clear\cf5 \strokec5 ()\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 success\cf5 \strokec5 (\cf7 \strokec7 f"Pinned \cf5 \strokec5 \{\cf7 \strokec7 len\cf5 \strokec5 (\cf0 \strokec3 items_to_pin\cf5 \strokec5 )\}\cf7 \strokec7  items!"\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 rerun\cf5 \strokec5 ()\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 divider\cf5 \strokec5 ()\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Export
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 button\cf5 \strokec5 (\cf7 \strokec7 "\uc0\u55357 \u56549  Export Board"\cf5 \strokec5 ):\cf0 \strokec3  items \cf6 \strokec6 =\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 ,\cf0 \strokec3  \cf5 \strokec5 [])\cf0 \strokec3  md \cf6 \strokec6 =\cf0 \strokec3  \cf7 \strokec7 f"# \cf5 \strokec5 \{\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 \}\cf7 \strokec7 \\n\\n"\cf0 \strokec3  \cf2 \strokec2 for\cf0 \strokec3 item \cf2 \strokec2 in\cf0 \strokec3  items\cf5 \strokec5 :\cf0 \strokec3  md \cf6 \strokec6 +=\cf0 \strokec3  \cf7 \strokec7 f"## \cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'title'\cf5 \strokec5 ]\}\cf7 \strokec7 \\n"\cf0 \strokec3  md \cf6 \strokec6 +=\cf0 \strokec3  \cf7 \strokec7 f"- Type: \cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'type'\cf5 \strokec5 ]\}\cf7 \strokec7 \\n"\cf0 \strokec3  md \cf6 \strokec6 +=\cf0 \strokec3  \cf7 \strokec7 f"- URL: \cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'url'\cf5 \strokec5 ]\}\cf7 \strokec7 \\n"\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3 item\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf7 \strokec7 'description'\cf5 \strokec5 ):\cf0 \strokec3  md \cf6 \strokec6 +=\cf0 \strokec3  \cf7 \strokec7 f"- Description: \cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'description'\cf5 \strokec5 ]\}\cf7 \strokec7 \\n"\cf0 \strokec3  md \cf6 \strokec6 +=\cf0 \strokec3  \cf7 \strokec7 f"- Added: \cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'added'\cf5 \strokec5 ]\}\cf7 \strokec7 \\n\\n---\\n\\n"\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 download_button\cf5 \strokec5 (\cf0 \strokec3  \cf7 \strokec7 "Download Markdown"\cf5 \strokec5 ,\cf0 \strokec3  md\cf5 \strokec5 ,\cf0 \strokec3  file_name\cf6 \strokec6 =\cf7 \strokec7 f"\cf5 \strokec5 \{\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 .\cf0 \strokec3 replace\cf5 \strokec5 (\cf7 \strokec7 ' '\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 '_'\cf5 \strokec5 )\}\cf7 \strokec7 .md"\cf0 \strokec3  \cf5 \strokec5 )\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Main content
\f0\i0 \cf0 \strokec3  tab1\cf5 \strokec5 ,\cf0 \strokec3  tab2 \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 tabs\cf5 \strokec5 ([\cf7 \strokec7 "\uc0\u55357 \u56589  AI Search"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 f"\uc0\u55357 \u56523  \cf5 \strokec5 \{\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ])\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  tab1\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 title\cf5 \strokec5 (\cf7 \strokec7 "AI-Powered Research Search"\cf5 \strokec5 )\cf0 \strokec3  col1\cf5 \strokec5 ,\cf0 \strokec3  col2 \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 columns\cf5 \strokec5 ([\cf8 \strokec8 3\cf5 \strokec5 ,\cf0 \strokec3  \cf8 \strokec8 1\cf5 \strokec5 ])\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  col1\cf5 \strokec5 :\cf0 \strokec3  query \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 text_input\cf5 \strokec5 (\cf7 \strokec7 "What are you researching?"\cf5 \strokec5 ,\cf0 \strokec3 placeholder\cf6 \strokec6 =\cf7 \strokec7 "e.g., 1860s Ireland women's fashion"\cf5 \strokec5 ,\cf0 \strokec3  key\cf6 \strokec6 =\cf7 \strokec7 "search_query"\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  col2\cf5 \strokec5 :\cf0 \strokec3  content_type \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 selectbox\cf5 \strokec5 (\cf7 \strokec7 "Content Type"\cf5 \strokec5 ,\cf0 \strokec3  \cf5 \strokec5 [\cf7 \strokec7 "all"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "article"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "image"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "video"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "pdf"\cf5 \strokec5 ])\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 button\cf5 \strokec5 (\cf7 \strokec7 "\uc0\u55357 \u56589  Search with AI"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 type\cf6 \strokec6 =\cf7 \strokec7 "primary"\cf5 \strokec5 ,\cf0 \strokec3 use_container_width\cf6 \strokec6 =\cf8 \strokec8 True\cf5 \strokec5 ):\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  query\cf5 \strokec5 :\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 spinner\cf5 \strokec5 (\cf7 \strokec7 "AI is searching the web..."\cf5 \strokec5 ):\cf0 \strokec3  results \cf6 \strokec6 =\cf0 \strokec3  search_with_ai\cf5 \strokec5 (\cf0 \strokec3 query\cf5 \strokec5 ,\cf0 \strokec3 content_type\cf5 \strokec5 )\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Add IDs to results
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 for\cf0 \strokec3  i\cf5 \strokec5 ,\cf0 \strokec3  result \cf2 \strokec2 in\cf0 \strokec3  \cf7 \strokec7 enumerate\cf5 \strokec5 (\cf0 \strokec3 results\cf5 \strokec5 ):\cf0 \strokec3  result\cf5 \strokec5 [\cf7 \strokec7 'id'\cf5 \strokec5 ]\cf0 \strokec3  \cf6 \strokec6 =\cf0 \strokec3  \cf7 \strokec7 f"\cf5 \strokec5 \{\cf7 \strokec7 hash\cf5 \strokec5 (\cf0 \strokec3 result\cf5 \strokec5 [\cf7 \strokec7 'url'\cf5 \strokec5 ])\}\cf7 \strokec7 _\cf5 \strokec5 \{\cf0 \strokec3 i\cf5 \strokec5 \}\cf7 \strokec7 "\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 search_results \cf6 \strokec6 =\cf0 \strokec3  results st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items\cf5 \strokec5 .\cf0 \strokec3 clear\cf5 \strokec5 ()\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 rerun\cf5 \strokec5 ()\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Display results
\f0\i0 \cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 search_results\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 subheader\cf5 \strokec5 (\cf7 \strokec7 f"Found \cf5 \strokec5 \{\cf7 \strokec7 len\cf5 \strokec5 (\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 search_results\cf5 \strokec5 )\}\cf7 \strokec7  sources"\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 for\cf0 \strokec3  result \cf2 \strokec2 in\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 search_results\cf5 \strokec5 :\cf0 \strokec3  is_selected \cf6 \strokec6 =\cf0 \strokec3  result\cf5 \strokec5 [\cf7 \strokec7 'id'\cf5 \strokec5 ]\cf0 \strokec3  \cf2 \strokec2 in\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items \cf2 \strokec2 with\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 container\cf5 \strokec5 (\cf0 \strokec3 border\cf6 \strokec6 =\cf8 \strokec8 True\cf5 \strokec5 ):\cf0 \strokec3 col1\cf5 \strokec5 ,\cf0 \strokec3  col2 \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 columns\cf5 \strokec5 ([\cf8 \strokec8 4\cf5 \strokec5 ,\cf0 \strokec3  \cf8 \strokec8 1\cf5 \strokec5 ])\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  col1\cf5 \strokec5 :\cf0 \strokec3  emoji \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 'article'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55357 \u56516 '\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 'image'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55357 \u56764 \u65039 '\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 'video'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55356 \u57260 '\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 'pdf'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55357 \u56533 '\cf5 \strokec5 \}.\cf0 \strokec3 get\cf5 \strokec5 (\cf0 \strokec3 result\cf5 \strokec5 [\cf7 \strokec7 'type'\cf5 \strokec5 ],\cf7 \strokec7 '\uc0\u55357 \u56516 '\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 markdown\cf5 \strokec5 (\cf7 \strokec7 f"\cf5 \strokec5 \{\cf0 \strokec3 emoji\cf5 \strokec5 \}\cf7 \strokec7  **\cf5 \strokec5 \{\cf0 \strokec3 result\cf5 \strokec5 [\cf7 \strokec7 'title'\cf5 \strokec5 ]\}\cf7 \strokec7 **"\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 caption\cf5 \strokec5 (\cf0 \strokec3 result\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf7 \strokec7 'description'\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 ''\cf5 \strokec5 ))\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 markdown\cf5 \strokec5 (\cf7 \strokec7 f"[View Source](\cf5 \strokec5 \{\cf0 \strokec3 result\cf5 \strokec5 [\cf7 \strokec7 'url'\cf5 \strokec5 ]\}\cf7 \strokec7 )"\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  col2\cf5 \strokec5 :\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 checkbox\cf5 \strokec5 (\cf7 \strokec7 "Select"\cf5 \strokec5 ,\cf0 \strokec3  value\cf6 \strokec6 =\cf0 \strokec3 is_selected\cf5 \strokec5 ,\cf0 \strokec3  key\cf6 \strokec6 =\cf7 \strokec7 f"cb_\cf5 \strokec5 \{\cf0 \strokec3 result\cf5 \strokec5 [\cf7 \strokec7 'id'\cf5 \strokec5 ]\}\cf7 \strokec7 "\cf5 \strokec5 ):\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items\cf5 \strokec5 .\cf0 \strokec3 add\cf5 \strokec5 (\cf0 \strokec3 result\cf5 \strokec5 [\cf7 \strokec7 'id'\cf5 \strokec5 ])\cf0 \strokec3  \cf2 \strokec2 else\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 selected_items\cf5 \strokec5 .\cf0 \strokec3 discard\cf5 \strokec5 (\cf0 \strokec3 result\cf5 \strokec5 [\cf7 \strokec7 'id'\cf5 \strokec5 ])\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  tab2\cf5 \strokec5 :\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 title\cf5 \strokec5 (\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 )\cf0 \strokec3  items \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 ,\cf0 \strokec3  \cf5 \strokec5 [])\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  \cf2 \strokec2 not\cf0 \strokec3 items\cf5 \strokec5 :\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 info\cf5 \strokec5 (\cf7 \strokec7 "No items pinned yet. Use AI Search to find and pin content."\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 else\cf5 \strokec5 :\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Filter
\f0\i0 \cf0 \strokec3  filter_type \cf6 \strokec6 =\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 selectbox\cf5 \strokec5 (\cf7 \strokec7 "Filter by type"\cf5 \strokec5 ,\cf0 \strokec3  \cf5 \strokec5 [\cf7 \strokec7 "all"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "article"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "image"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "video"\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 "pdf"\cf5 \strokec5 ])\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  filter_type \cf6 \strokec6 !=\cf0 \strokec3  \cf7 \strokec7 "all"\cf5 \strokec5 :\cf0 \strokec3  items \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 [\cf0 \strokec3 i \cf2 \strokec2 for\cf0 \strokec3  i \cf2 \strokec2 in\cf0 \strokec3  items \cf2 \strokec2 if\cf0 \strokec3 i\cf5 \strokec5 [\cf7 \strokec7 'type'\cf5 \strokec5 ]\cf0 \strokec3  \cf6 \strokec6 ==\cf0 \strokec3  filter_type\cf5 \strokec5 ]\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 write\cf5 \strokec5 (\cf7 \strokec7 f"**\cf5 \strokec5 \{\cf7 \strokec7 len\cf5 \strokec5 (\cf0 \strokec3 items\cf5 \strokec5 )\}\cf7 \strokec7  items**"\cf5 \strokec5 )\cf0 \strokec3  
\f1\i \cf4 \strokec4 # Display items
\f0\i0 \cf0 \strokec3  cols \cf6 \strokec6 =\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 columns\cf5 \strokec5 (\cf8 \strokec8 3\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 for\cf0 \strokec3  idx\cf5 \strokec5 ,\cf0 \strokec3  item \cf2 \strokec2 in\cf7 \strokec7 enumerate\cf5 \strokec5 (\cf0 \strokec3 items\cf5 \strokec5 ):\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  cols\cf5 \strokec5 [\cf0 \strokec3 idx \cf6 \strokec6 %\cf0 \strokec3  \cf8 \strokec8 3\cf5 \strokec5 ]:\cf0 \strokec3  \cf2 \strokec2 with\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 container\cf5 \strokec5 (\cf0 \strokec3 border\cf6 \strokec6 =\cf8 \strokec8 True\cf5 \strokec5 ):\cf0 \strokec3  emoji \cf6 \strokec6 =\cf0 \strokec3  \cf5 \strokec5 \{\cf7 \strokec7 'article'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55357 \u56516 '\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 'image'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55357 \u56764 \u65039 '\cf5 \strokec5 ,\cf0 \strokec3  \cf7 \strokec7 'video'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55356 \u57260 '\cf5 \strokec5 ,\cf7 \strokec7 'pdf'\cf5 \strokec5 :\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55357 \u56533 '\cf5 \strokec5 \}.\cf0 \strokec3 get\cf5 \strokec5 (\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'type'\cf5 \strokec5 ],\cf0 \strokec3  \cf7 \strokec7 '\uc0\u55357 \u56516 '\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 markdown\cf5 \strokec5 (\cf7 \strokec7 f"### \cf5 \strokec5 \{\cf0 \strokec3 emoji\cf5 \strokec5 \}\cf7 \strokec7  \cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'title'\cf5 \strokec5 ]\}\cf7 \strokec7 "\cf5 \strokec5 )\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 caption\cf5 \strokec5 (\cf7 \strokec7 f"\cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'type'\cf5 \strokec5 ]\}\cf7 \strokec7  \'95 \cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'added'\cf5 \strokec5 ]\}\cf7 \strokec7 "\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3  item\cf5 \strokec5 .\cf0 \strokec3 get\cf5 \strokec5 (\cf7 \strokec7 'description'\cf5 \strokec5 ):\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 write\cf5 \strokec5 (\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'description'\cf5 \strokec5 ])\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 markdown\cf5 \strokec5 (\cf7 \strokec7 f"[Open Link](\cf5 \strokec5 \{\cf0 \strokec3 item\cf5 \strokec5 [\cf7 \strokec7 'url'\cf5 \strokec5 ]\}\cf7 \strokec7 )"\cf5 \strokec5 )\cf0 \strokec3  \cf2 \strokec2 if\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 button\cf5 \strokec5 (\cf7 \strokec7 "\uc0\u55357 \u56785 \u65039  Delete"\cf5 \strokec5 ,\cf0 \strokec3  key\cf6 \strokec6 =\cf7 \strokec7 f"del_\cf5 \strokec5 \{\cf0 \strokec3 idx\cf5 \strokec5 \}\cf7 \strokec7 "\cf5 \strokec5 ):\cf0 \strokec3  st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 pinned_items\cf5 \strokec5 [\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 session_state\cf5 \strokec5 .\cf0 \strokec3 current_board\cf5 \strokec5 ].\cf0 \strokec3 remove\cf5 \strokec5 (\cf0 \strokec3 item\cf5 \strokec5 )\cf0 \strokec3 st\cf5 \strokec5 .\cf0 \strokec3 rerun\cf5 \strokec5 ()\cf0 \strokec3  ``` 
\f1\i \cf4 \strokec4 ### **requirements.txt:**
\f0\i0 \cf0 \strokec3  ``` streamlit\cf6 \strokec6 >=\cf8 \strokec8 1.32.0\cf0 \strokec3  anthropic\cf6 \strokec6 >=\cf8 \strokec8 0.18.0}